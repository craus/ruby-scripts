Программа представляет собой ориентированный граф.
Из каждой вершины всегда есть ровно две дуги, помеченные как "правая" ("left") и "левая" ("right").
В каждой вершине может быть записан один ASCII символ.
Есть три головки, каждая из которых в каждый момент находится на какой-то из вершин графа:
- головка кода
- головка данных
- головка-метка (далее: метка)
Головка данных может находится в одном из двух состояний: повёрнута вправо или влево.

В коде программы содержится информация об исходной структуре графа:
- число вершин
- куда указывают левая и правая дуги из каждой вершины
- символы в каждой из вершин
- расположение головок 
- состояние головки данных (по умолчанию повёрнута вправо)

Будем называть текущей дугой левую дугу, если головка данных повёрнута влево, и правую в противоположном случае.

При работе программы
В каждый момент времени считывается символ под головкой кода и в зависимости от него производятся следующие операции:
T - "turn" 
  головка данных меняет своё состояние на остальное
M - "move" 
  головка данных перемещается по текущей дуге из вершины, где она сейчас
I - "in" 
  с консоли считывается символ и пишется под головку данных
O - "out" 
  символ, находящийся под головкой данных, пишется на консоль
R - "redirect" 
  текущая дуга из вершины под меткой перенаправляется на вершину под головкой данных 
L - "label" 
  метка перемещается на вершину под головкой данных
W - "write" 
  символ, находящийся под меткой, пишется под головку данных
N - "new" 
  создаётся новая вершина с тем же символом, что и под головкой данных
  текущая дуга из вершины под головкой данных направляется в эту вершину
  текущая дуга из этой вершины направляется в вершину под меткой
  другая дуга из этой вершины направляется в вершину под головкой данных
  головка данных перемещается в эту вершину
Все остальные символы - работа программы завершается.
  
После этого все вершины, недостижимые ни из какой вершины под какой-либо головкой, удаляются из графа.
Рёбра, указывающие на удаляемые вершины, перенаправляются на свои стартовые вершины, делаясь петлями.
Это местная сборка мусора.
Она не влияет на результат работы программы, но позволяет экономить память.

Затем головка кода перемещается по левой дуге, если символы в вершинах под меткой и головкой данных различны, и по правой, иначе.



  
  
  
  
  
  
  
  
  
  
  
  
  
  